/*
*  Flexible Content
*
*  @description: 
*  @since: 3.5.8
*  @created: 17/01/13
*/(function(e){acf.text.flexible_content_no_fields="Flexible Content requires at least 1 layout";e("#acf_fields .acf_fc_add").live("click",function(){var t=e(this).closest("tr.field_option_flexible_content"),n=t.clone(!1),r=n.attr("data-id"),i=acf.helpers.uniqid();n.find(".field:not(.field_key-field_clone)").remove();n.find(".no_fields_message").show();n.find('.acf_cf_meta input[type="text"]').val("");n.find("[name]").each(function(){var t=e(this).attr("name").replace("[layouts]["+r+"]","[layouts]["+i+"]");e(this).attr("name",t);e(this).attr("id",t)});n.attr("data-id",i);t.after(n);n.find(".acf_cf_meta select").val("row").trigger("change");return!1});e("#acf_fields .acf_fc_duplicate").live("click",function(){var t=e(this).closest("tr.field_option_flexible_content"),n=null,r=t.attr("data-id"),i=acf.helpers.uniqid();t.find("select").each(function(){e(this).attr("data-val",e(this).val())});n=t.clone(!1);n.find("[name]").each(function(){var t=e(this).attr("name").replace("[layouts]["+r+"]","[layouts]["+i+"]");e(this).attr("name",t);e(this).attr("id",t)});n.attr("data-id",i);n.find(".field:not(.field_key-field_clone)").each(function(){e(this).update_names()});t.after(n);n.find("select").each(function(){e(this).val(e(this).attr("data-val")).trigger("change")});var s=n.find('.acf_fc_label input[type="text"]'),o=n.find('.acf_fc_name input[type="text"]');o.val("");s.val(s.val()+" ("+acf.text.copy+")");s.trigger("blur");return!1});e("#acf_fields .acf_fc_delete").live("click",function(){var t=e(this).closest("tr.field_option_flexible_content"),n=t.siblings("tr.field_option.field_option_flexible_content").length;if(n<=1){alert(acf.text.flexible_content_no_fields);return!1}t.animate({left:"50px",opacity:0},250,function(){t.remove()})});e("#acf_fields .acf_fc_reorder").live("mouseover",function(){var t=e(this).closest("table.acf_field_form_table");if(t.hasClass("sortable"))return!1;t.addClass("sortable").children("tbody").sortable({items:".field_option_flexible_content",handle:"a.acf_fc_reorder",helper:acf.sortable_helper,forceHelperSize:!0,forcePlaceholderSize:!0,scroll:!0,start:function(e,t){var n=t.item.children("td").length;t.placeholder.html('<td colspan="'+n+'"></td>')}})});e('#acf_fields .acf_fc_label input[type="text"]').live("blur",function(){var t=e(this),n=e(this).parents("td").siblings("td.acf_fc_name").find('input[type="text"]');if(n.val()==""){var r=t.val().toLowerCase().split(" ").join("_").split("'").join("");n.val(r);n.trigger("keyup")}});e("#acf_fields .acf_fc_display select").live("change",function(){var t=e(this);t.closest(".repeater").removeClass("layout-row").removeClass("layout-table").addClass("layout-"+t.val())});e(document).live("acf/field_form-open",function(t,n){e(n).find(".acf_fc_display select").each(function(){e(this).trigger("change")})})})(jQuery);